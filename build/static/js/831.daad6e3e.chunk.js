"use strict";(self.webpackChunkclient_2=self.webpackChunkclient_2||[]).push([[831],{1907:(e,s,t)=>{t.d(s,{A:()=>n});var l=t(579);const n=e=>{let{hotel:s,bookingInfo:t,nights:n,showNameAndLocation:a=!0}=e;return(0,l.jsxs)("div",{className:"grid gap-4 rounded-lg border border-slate-300 p-4 h-fit",children:[(0,l.jsx)("h1",{className:"text-xl font-bold",children:"Your Booking Info"}),a&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"border-b py-2",children:["Name:",(0,l.jsx)("div",{className:"font-bold",children:s.name})]}),(0,l.jsxs)("div",{className:"border-b py-2",children:["Location:",(0,l.jsxs)("div",{className:"font-bold",children:[s.addressLine,", ",s.state,", ",s.country,", ",s.pin]})]})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center border-b py-2",children:[(0,l.jsxs)("div",{children:["Ckeck In:",(0,l.jsx)("div",{className:"font-bold",children:new Date(t.checkIn).toDateString()})]}),(0,l.jsxs)("div",{children:["Ckeck Out:",(0,l.jsx)("div",{className:"font-bold",children:new Date(t.checkOut).toDateString()})]})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center border-b py-2",children:[(0,l.jsxs)("div",{children:["Number Of Nights Stay:",(0,l.jsx)("div",{className:"font-bold",children:n})]}),(null===t||void 0===t?void 0:t.price)&&(0,l.jsxs)("div",{children:["Total Payment",(0,l.jsx)("div",{className:"font-bold",children:t.price})]})]}),(0,l.jsxs)("div",{className:"border-b py-2",children:["Guests:",(0,l.jsxs)("div",{className:"font-bold",children:[t.adultCount," Adults & ",t.childCount||0," Children"]})]})]})}},2721:(e,s,t)=>{t.d(s,{A:()=>a});var l=t(710),n=t(579);const a=()=>(0,n.jsx)("div",{className:"justify-center flex items-center",children:(0,n.jsx)(l.A,{size:100,color:"blue"})})},2831:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var l=t(3003),n=t(9601),a=t(5043),i=t(3216),d=t(2721),c=t(1907),o=t(3369),r=t(4858),m=t(658),h=t(579);const u=e=>{let{hotel:s,nights:t,bookingInfo:n}=e;const{user:i}=(0,l.d4)(o.ge),{info:d,intentCreated:c}=(0,l.d4)(m.W8),u=(0,l.wA)(),{register:x,setValue:f,handleSubmit:b}=(0,r.mN)({defaultValues:i}),g=b((()=>{u((0,m.nT)(t*s.discountedPrice))}));return(0,a.useEffect)((()=>{c&&(()=>{const{data:e,key:l}=d,a="".concat("https://vikeys-holidays.onrender.com/api/","booking/paymentverification?checkIn=").concat(n.checkIn,"&checkOut=").concat(n.checkOut,"&hotel=").concat(s.id,"&adultCount=").concat(n.adultCount,"&childCount=").concat(n.childCount,"&price=").concat(t*s.discountedPrice),c={key:l,amount:+e.amount,currency:"INR",name:"Vikey's Holidays",description:"Vikey's Holidays Online Payment",image:s.photos[0],order_id:e.id,callback_url:a,prefill:{name:i.name,email:i.email},notes:JSON.stringify({address:"Razorpay Corporate Office",bookingInfo:{...n,hotel:s.id}}),theme:{color:"#3399cc"}};new window.Razorpay(c).open()})()}),[c]),(0,a.useEffect)((()=>{f("firstName",i.firstName),f("lastName",i.lastName),f("email",i.email)}),[f,i.email,i.firstName,i.lastName]),(0,h.jsxs)("form",{onSubmit:g,className:"grid grid-cols-1 gap-5 rounded-md border border-slate-300 p-5",children:[(0,h.jsx)("h1",{className:"text-3xl font-bold",children:"Confim Your Details"}),(0,h.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,h.jsxs)("label",{className:"text-gray-700 text-sm font-bold flex-1",children:["First Name:",(0,h.jsx)("input",{...x("firstName"),type:"text",className:"mt-1 border rounded w-full py-2 px-3 bg-gray-200",readOnly:!0,disabled:!0})]}),(0,h.jsxs)("label",{className:"text-gray-700 text-sm font-bold flex-1",children:["Last Name:",(0,h.jsx)("input",{...x("lastName"),type:"text",className:"mt-1 border rounded w-full py-2 px-3 bg-gray-200",readOnly:!0,disabled:!0})]})]}),(0,h.jsxs)("label",{className:"text-gray-700 text-sm font-bold flex-1",children:["Email:",(0,h.jsx)("input",{type:"text",className:"mt-1 border rounded w-full py-2 px-3 bg-gray-200",readOnly:!0,disabled:!0,...x("email")})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h1",{className:"text-xl font-semibold",children:"Price Summary"}),(0,h.jsxs)("div",{className:"bg-blue-200 p-4 my-3 rounded-md",children:[(0,h.jsxs)("div",{className:"font-semibold text-xl",children:["Total Cost: \u20b9 ",s.discountedPrice*t]}),(0,h.jsx)("p",{className:"text-xs",children:"Includes All Taxes & Charges"})]})]}),(0,h.jsx)("div",{className:"flex justify-end",children:(0,h.jsx)("button",{type:"submit",className:"bg-blue-600 text-white p-2 font-bold hover:bg-blue-500 transition-all outline-none rounded-md",children:"Confirm Booking"})})]})},x=()=>{const[e,s]=(0,a.useState)(),{id:t}=(0,i.g)(),o=(0,i.Zp)(),{status:r,fetchedHotel:m}=(0,l.d4)(n.xe),x=JSON.parse(localStorage.getItem("bookingInfo")),f=(0,l.wA)();return(0,a.useEffect)((()=>{if(x.checkIn&&x.checkOut){const e=Math.abs(new Date(x.checkOut).getTime()-new Date(x.checkIn).getTime())/864e5;s(Math.ceil(e))}}),[x.checkIn,x.checkOut]),(0,a.useEffect)((()=>{f((0,n.xE)(t))}),[f,t]),(0,a.useEffect)((()=>{null!==x&&void 0!==x&&x.checkIn||o("/")}),[null===x||void 0===x?void 0:x.checkIn,m.name,o]),(0,h.jsx)(h.Fragment,{children:"loading"===r?(0,h.jsx)(d.A,{}):(0,h.jsx)(h.Fragment,{children:m.name?(0,h.jsxs)("div",{className:"grid md:grid-cols-[1fr_2fr] gap-5",children:[(0,h.jsx)(c.A,{hotel:m,bookingInfo:x,nights:e}),(0,h.jsx)(u,{hotel:m,nights:e,bookingInfo:x})]}):(0,h.jsx)("div",{className:"text-red-500 flex justify-center font-bold text-3xl",children:"Hotel Not Found"})})})}}}]);
//# sourceMappingURL=831.daad6e3e.chunk.js.map